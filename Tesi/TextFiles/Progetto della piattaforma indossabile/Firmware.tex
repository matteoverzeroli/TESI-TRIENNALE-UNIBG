\section{Firmware}\label{sec:Firmware}
Il firmware per le schede è stato sviluppato utilizzando l'IDE (\textit{Integrated Development Environment}) STM32CubeIDE (versione 1.6.1), una piattaforma di sviluppo C/C++ che permette la configurazione delle periferiche, la generazione e la compilazione del codice e strumenti di debug per i microcontrollori STM32 \cite{STMicroelectronicsSTM32CubeIDE}. \`E basato sul framework Eclipse\textregistered/CDT e sulla toolchain GCC per lo sviluppo e GDB per il debug. Inoltre, sono state utilizzate le librerie HAL (\textit{Hardware Abstraction Layer}), distribuite da STMicroelectronics, che forniscono funzioni e strutture dati utili che agevolano la scrittura del codice. Esse sono state progettate per fornire alcune API (\textit{Application Programming Interface}) per comunicare con i layer superiori delle applicazioni\cite{STMicroelectronicsHAL}. Ogni driver è stato sviluppato seguendo un'interfaccia comune, in modo da standardizzarne la struttura e i nomi di parametri e funzioni. Queste librerie implementano funzionalità utili a gestire le periferiche, in modo da aiutare il programmatore nella scrittura del codice necessario a svolgere alcune funzionalità comuni alla maggior parte dei sistemi.\todo{paragrafo da rivedere}
Le principali caratteristiche delle librerie HAL sono:
\begin{itemize}
	\item Insieme di API \textit{cross-family} per l'utilizzo delle periferiche più comuni e API di estensione per particolari funzioni.
	\item Tre modelli di programmazione: polling, interrupt e DMA (\textit{Direct Memory Access}).
	\item Conformità agli standard RTOS (\textit{Real Time Operating System}):
	\begin{itemize}
		\item API completamente rientranti.
		\item Uso sistematico di timeout nella modalità \textit{polling}.
	\end{itemize}
	\item Supporto di istanze multiple di una medesima periferica (ad esempio USART1, USART2) permettendo chiamate delle API concorrenti.
	\item Tutte le API implementano un meccanismo di "call-back".
	\item Accesso esclusivo alle risorse condivise.
	\item Utilizzo di timeout per prevenire processi bloccanti.
\end{itemize}

\todo{inserire imamgini configurazione pin}
\todo{parlare libreria usb}

\clearpage